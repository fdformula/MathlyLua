<!DOCTYPE html>
<html lang="en-US">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<style>
a {
    text-decoration: none;
}
p, table, pre, h5 {
    margin: 20px
}
div {
  font-size: 16px;
  margin: 30px 20px
}
</style>
</head>
<body>
<div>
<h2>1. Lua Tables and Mathly Vectors/Matrices</h2>
<p>Tables are the only data structure Lua offers. However, we may use it as arrays, vectors, matrices, dictionaries, and
so on. For example, <code>{}</code>, <code>{'ab'}</code>, <code>{1, 2, 3}</code>, <code>{{1, 2, 3}, {, 2, 3, 4}}</code>,
<code>{1, 'ab', { 2, 3, {4}}}</code>, <code>{layout={width=900, height=400, grid={rows=2, columns=2}, title='Demo'}</code>
are all tables.</p>

<p>A mathly matrix is obtained/generated by mathly 'creator', functions like <code>zeros</code>, <code>ones</code>,
<code>rand</code> and <code>randi</code>, or some matrix operations like <code>A^T</code>, <code>inv(A)</code>, and
<code>2 * A  - 3 * B + 4</code>, given that <code>A</code> and <code>B</code> are mathly matrices.</p>

<p>A mathly row vector is a <code>1xn</code> mathly matrix, and a mathly column vector is a <code>nx1</code> mathly matrix.
They are all matrices and, thus, an element in the <code>i</code>th row and <code>j</code>th column must be addressed like
<code>A[i][j]</code>.</p>

<p>You may see some <i>convenient</i> matrix operations in the following examples.</p>
<pre><code>
mathly = require('mathly')
-- the 'creator' of mathly creates mathly matrices
a = mathly{{1, 2, 3}, {2, 3, 4}}
b = {{1}, {2}, {3}}; b = mathly(b)
c = mathly(1, 10, 5)
d = mathly(1, 10, 0)               --  same as d = mathly(zeros(1, 10))
A = mathly(10, 10)
B = mathly(1, 10)

-- rand, randi, ones, and zeros can create mathly matrices
C = randi(10, 1)                   -- a column vector of random integer numbers (from 0 to 100)
D = randi(10, 2, 50, 110)          -- a 10x2 matrix of random integer numbers (from 50 to 110)
E = rand(10, 3)                    -- a 10x3 matrix of random numbers (from 0 to 1)

-- mathly matrix operations can each generate a mathly matrix
3*a - 10
2*c + 5 * d - 3
inv(A) * B^T
inv(A) * randi(1, 10)              -- mathly knows how to handle a table randi(1, 10) here in its context
randi(1, 10) * inv(A)              --
</code></pre>

<h2>2. Commonly Used Mathematical Functions</h2>
<p>Commonly used math functions are each now able to work on Lua tables, including mathly matrices. They are
<code>abs</code>, <code>acos</code>, <code>asin</code>, <code>atan</code>, <code>ceil</code>, <code>cos</code>,
<code>deg</code>, <code>exp</code>, <code>floor</code>, <code>log</code>, <code>rad</code>, <code>random</code>,
<code>sin</code>, <code>sqrt</code>, and <code>tan</code>. They evaluate each a function at every number in a
table and keep the structure of the table.</p>

<p>For example, <code>abs({1, -2, {-3, 4, {5, -6}}})</code> evaluates Lua built-in function <code>math.abs</code>
at every number in the table and thus gives {1, 2, {3, 4, {5, 6}}}.</p>

<p>Note: With each of these functions, should we use, say, <code>sin(x)</code> or <code>math.sin(x)</code>?
<B>You can always use <code>sin(x)</code>. However, if you know <code>x</code> is a number, you may call
<code>math.sin(x)</code> to get a little improvement in performance.</p></B>

<p>Mathly also provides three commonly used constants. They are:</p>
<table><tbody>
<tr><td><code>pi = 3.1415926535898</code></td><td width=20></td><td>         It is simply <code>math.pi</code>.</td></tr>
<tr><td><code>e = 2.718281828459</code></td><td width=20></td><td>           It is <code>math.exp(1)</code>.</td></tr>
<tr><td><code>eps = 2.220446049250313e-16</code></td><td width=20></td><td>  It is the machine epsilon.</td></tr>
</tbody>
</table>
<p></p>
<p><u>Note</u>: <code>T</code> is reserved by mathly for finding the transpose of a matrix, e.g., <code>A^T</code>, where <code>A</code> is a mathly matrix.</p>

<a name=list></a><h2>3. The following table summarizes other functions provided by <code>mathly</code>.</h2>
<table>
<tbody>
<tr><td width="20%"><a href=#apply><code>apply(f, ...)</code></a></td><td width=1%> </td><td width=79%>As with some other programming languages like <i>Mathematica</i>, call function <code>f</code> with the arguments.</td></tr>
<tr><td><code>clear()</code></td><td> </td><td>Delete all user-defined variables and their values in memory and make it ready for a new task.</td></tr>
<tr><td><code>cls()</code></td><td> </td><td>Clear Lua console.</td></tr>
<tr><td><a href=#concath><code>concath(A, B, ...)</code></a></td><td> </td><td>Concatenate matrices <code>A</code>, <code>B</code>, ... in order horizontally. Matrices must have the same number of rows.</td></tr>
<tr><td><a href=#concatv><code>concatv(A, B, ...)</code></a></td><td> </td><td>Concatenate matrices <code>A</code>, <code>B</code>, ... in order vertically. Matrices must have the same number of columns.</td></tr>
<tr><td><a href=#copy><code>copy(x)</code></a></td><td> </td><td>Make a deep copy of <code>x</code>.</td></tr>
<tr><td><a href=#cross><code>cross(a, b)</code></a></td><td> </td><td>Calculate the cross/vector product of <code>a = {a<sub>1</sub>, a<sub>2</sub>, a<sub>3</sub>}</code> and <code>b = {b<sub>1</sub>, b<sub>2</sub>, b<sub>3</sub>}</code>.</td></tr>
<tr><td><code>det(A)</code></td><td> </td><td>Calculate the determinant of a square matrix <code>A</code>.</td></tr>
<tr><td><a href=#diag><code>diag(A)</code></a></td><td> </td><td>Return a table of the diagonal entries of matrix <code>A</code>.</td></tr>
<tr><td><a href=#disp><code>disp(x)</code></a></td><td> </td><td>Print a mathly matrix.</td></tr>
<tr><td><a href=#display><code>display(x)</code></a></td><td> </td><td>Print a table with structure.</td></tr>
<tr><td><a href=#dot><code>dot(a, b)</code></a></td><td> </td><td>Calculate the dot/inner product of <code>a = {a<sub>1</sub>, a<sub>2</sub>, ..., a<sub>n</sub>}</code> and <code>b = {b<sub>1</sub>, b<sub>2</sub>, ..., b<sub>n</sub>}</code>.</td></tr>
<tr><td><code>eye(n)</code></td><td> </td><td>Return a <code>nxn</code> identity mathly matrix.</td></tr>
<tr><td><a href=#flatten><code>flatten(x)</code></a></td><td> </td><td>Remove the structure of <code>x</code> and return a table of all atomic elements in <code>x</code> in order.</td></tr>
<tr><td><a href=#hasindex><code>hasindex(table, index)</code></a></td><td> </td><td>Check if <code>table</code> contains <code>index</code>.</td></tr>
<tr><td><a href=#inv><code>inv(A)</code></a></td><td> </td><td>Return the inverse of a square mathly matrix <code>A</code>. <u>Note</u>: <code>A</code> is modified.</td></tr>
<tr><td><code>isinteger(x)</code></td><td> </td><td>Check if <code>x</code> is an integer.</td></tr>
<tr><td><a href=#ismember><code>ismember(x, table)</code></a></td><td> </td><td>Check if <code>x</code> is a member of <code>table</code>.</td></tr>
<tr><td><a href=#join><code>join(t<sub>1</sub>, t<sub>2</sub>, ...)</code></a></td><td> </td><td>Concat tables <code>t<sub>1</sub></code>, <code>t<sub>2</sub></code>, ... and return the resulted table. The tables here may just be numbers or strings.</td></tr>
<tr><td><code>length(x)</code></td><td> </td><td>Return the length of a table or string.</td></tr>
<tr><td><a href=#linspace><code>linspace(x, y, n)</code></a></td><td> </td><td>Return a table of <code>n</code> evenly spaced numbers starting at <code>x</code> and ending at <code>y</code>.</td></tr>
<tr><td><code>ls()</code></td><td> </td><td>List all user-defined variables in the memory.</td></tr>
<tr><td><a href=#map><code>map(f, tbl)</code></a></td><td> </td><td>Apply function <code>f</code> to each atomic element in table <code>tbl</code> and return the result with the same structure of the table.</td></tr>
<tr><td><code>norm(x)</code></td><td> </td><td>Return the Euclidean norm of a row/column vector <code>x</code>.</td></tr>
<tr><td><a href=#ones><code>ones(m, n)</code></a></td><td> </td><td>Return a <code>mxn</code> mathly matrix of which each element is 1. If <code>m = 1</code>, return a table.</td></tr>
<tr><td><a href=#plot><code>plot(x, y, ...)</code></a></td><td> </td><td>Plot the graph(s) of functions defined by data points <code>x</code> and <code>y</code> and ...</td></tr>
<tr><td><a href=#polyval><code>polyval(coefs, x)</code></a></td><td> </td><td>Evaluate at <code>x</code> the value of a polynomial of which the coefficients are specified in a table <code>coefs</code>.</td></tr>
<tr><td><code>printf(...)</code></td><td> </td><td>Print formatted text like <code>printf</code> in C/C++.</td></tr>
<tr><td><a href=#prod><code>prod(A)</code></a></td><td> </td><td>If <code>A</code> is a table or mathly row/column vector, return the product of its elements; if A is a <code>mxn</code> matrix, ...</td></tr>
<tr><td><a href=#rand><code>rand(m, n)</code></a></td><td> </td><td>Return a <code>mxn</code> mathly matrix of which each element is a random number in [0, 1]. If <code>m = 1</code>, return a table.</td></tr>
<tr><td><a href=#randi><code>randi(m, n, ...)</code></a></td><td> </td><td>Return a <code>mxn</code> mathly matrix of which each element is a random integer in [0, 100]. If <code>m = 1</code>, return a table...</td></tr>
<tr><td><a href=#range><code>range(x, y, s)</code></a></td><td> </td><td>Return a table of numbers starting at <code>x</code>, in between <code>x</code> and <code>y</code>, and incrementing by <code>s</code>.</td></tr>
<tr><td><a href=#reshape><code>reshape(A, m, n)</code></a></td><td> </td><td>Rearrange existing elements in a table or mathly matrix <code>A</code> and return a new <code>mxn</code> mathly matrix.</td></tr>
<tr><td><a href=#rref><code>rref(A, ..)</code></a></td><td> </td><td>Return the reduced row-echelon form of a mathly matrix <code>A</code>. <u>Note</u>: <code>A</code> is modified.</td></tr>
<tr><td><a href=#save><code>save(datafile, ...)</code></a></td><td> </td><td>Save specified or all user-defined variables and their values to file <code>datafile</code>.</td></tr>
<tr><td><a href=#seq><code>seq(x, y, n)</code></a></td><td> </td><td>Return a table of <code>n</code> evenly spaced numbers starting at <code>x</code>, in <code>[x, y]</code>, ending at <code>y</code>.</td></tr>
<tr><td><code>size(A)</code></td><td> </td><td>Return the dimensions of a mathly matrix <code>A</code>.</td></tr>
<tr><td><a href=#solve><code>solve(A, b)</code></a></td><td> </td><td>Solve a linear system <code>Ax = b</code> and return the solution. <u>Note</u>: Both <code>A</code> and <code>b</code> are modified.</td></tr>
<tr><td><code>sprintf(...)</code></td><td> </td><td>Return formatted text like <code>sprintf</code> in C/C++.</td></tr>
<tr><td><a href=#submatrix><code>submatrix(A, i, j, m, n)</code></a></td><td> </td><td>Return a mathly matrix, a block of mathly matrix <code>A</code>, starting at the <code>i</code>-th row and <code>j</code>-th column and ending at the <code>m</code>-th row and <code>n</code>-th column.</td></tr>
<tr><td><a href=#subtable><code>subtable(tbl, i, j)</code></a></td><td> </td><td>Return a slice of the table <code>tbl</code> starting from the <code>i</code>-th element to the <code>j</code>-th one.</td></tr>
<tr><td><a href=#sum><code>sum(A)</code></a></td><td> </td><td>If <code>A</code> is a table or mathly row/column vector, return the sum of its elements; if A is a <code>mxn</code> matrix, ...</td></tr>
<tr><td><a href=#tic><code>tic()</code></a></td><td> </td><td>Start a wall-clock timer.</td></tr>
<tr><td><a href=#toc><code>toc</code></a></td><td> </td><td>Print or return elapsed time on a wall-clock timer.</td></tr>
<tr><td><a href=#zeros><code>zeros</code></a></td><td> </td><td>Return a <code>mxn</code> mathly matrix of which each element is 0. If <code>m = 1</code>, return a table.</td></tr>
</tbody>
</table>

<h4>&bull; &nbsp; <a name=apply href=#list><code>apply(f, ...)</code></a></h4>
<p>As with some other programming languages like <i>Mathematica</i>, it evaluates function <code>f</code> with provided arguments.</p>
<pre><code>
require 'mathly'
function f(x, y, z) return x + y + z end
apply(f, {1, 2, 3})  -- return 6
</code></pre>
<h4>&bull; &nbsp; <a name=concath href=#list><code>concath(A, B, ...)</code></a></h4>
<P>Concatenate matrices A, B, ... in order horizontally. Matrices must have the same number of rows.</P>
<pre><code>
m = require('mathly')
A = m{{1, 2}, {3, 4}}
disp(A)
-- 1 2
-- 3 4
B = m{{5}, {6}}
disp(B)
-- 5
-- 6
C = m{{7, 8, 9}, {10, 11, 12}}
disp(C)
--  7  8  9
-- 10 11 12
D = concath(A, B, C)
disp(D)
-- 1 2 5  7  8  9
-- 3 4 6 10 11 12
</code></pre>
<h4>&bull; &nbsp; <a name=concatv href=#list><code>concatv(A, B, ...)</code></a></h4>
<P>Concatenate matrices A, B, ... in order vertically. Matrices must have the same number of columns.</P>
<pre><code>
mathly = require('mathly')
A = mathly{{1, 2, 3}}
disp(A)
-- 1 2 3
B = mathly{{4, 5, 6}, {7, 8, 9}}
disp(B)
-- 4 5 6
-- 7 8 9
C = mathly{{10, 11, 12}}
disp(C)
-- 10 11 12
D = concatv(A, B)
disp(D)
-- 1 2 3
-- 4 5 6
-- 7 8 9
E = concatv(A, B, C)
disp(E)
-- 1   2  3
-- 4   5  6
-- 7   8  9
-- 10 11 12

</code></pre>
<h4>&bull; &nbsp; <a name=copy href=#list><code>copy(x)</code></a></h4>
<P>Make a deep copy of <code>x</code>.</P>
<pre><code>
m = require('mathly')
a = {1, 2, {3, 4, {5, 6}}}
b = copy(a)
b[3] = 0
display(a)
-- {1, 2, {3, 4, {5, 6}}}
display(b)
-- {1, 2, 0}

A = m{{1, 2}, {3, 4}}
B = copy(A)
C = inv(A) -- A is modified
disp(A)
-- 1 0
-- 0 1
disp(B)
-- 1 2
-- 3 4
</code></pre>
<h4>&bull; &nbsp; <a name=cross href=#list><code>cross(a, b)</code></a></h4>
<P>Return the cross/vector product of <code>a = {a<sub>1</sub>, a<sub>2</sub>, a<sub>3</sub>}</code>
and <code>b = {b<sub>1</sub>, b<sub>2</sub>, b<sub>3</sub>}</code>.</P>
<pre><code>
require 'mathly'
display(cross({1, 2, 3}, {3, 4, 5}))
-- {-2, 4, -2}
</code></pre>
<h4>&bull; &nbsp; <a name=diag href=#list><code>diag(A)</code></a></h4>
<P>Return a table of the diagonal entries of matrix <code>A</code>.</P>
<pre><code>
m = require('mathly')
a = m{{1, 2, 3}, {2, 3, 4}, {3, 4, 5}, {4, 5, 6}}
display(diag(a))
-- {1, 3, 5}
</code></pre>
<h4>&bull; &nbsp; <a name=disp href=#list><code>disp(A)</code></a> - Print a mathly matrix. If <code>A</code> is not a mathly matrix, <code>display</code> is called to print it.</h4>
<h4>&bull; &nbsp; <a name=display href=#list><code>display(x)</code></a> - Print a table with structure.</h4>
<pre><code>
require 'mathly'
a = eye(3)
disp(a)
-- 1 0 0
-- 0 1 0
-- 0 0 1
display(a)
-- {{1, 0, 0}, {0, 1, 0}, {0, 0, 1}}

x = {1, 2, {3, 4, {5, 6, {7, 8, {9}}}}}
display(x)
-- {1, 2, {3, 4, {5, 6, {7, 8, {9}}}}}
</code></pre>
<h4>&bull; &nbsp; <a name=dot href=#list><code>dot(a, b)</code></a></h4>
<P>Return the dot/inner product of <code>a = {a<sub>1</sub>, a<sub>2</sub>, ...}</code>
and <code>b = {b<sub>1</sub>, b<sub>2</sub>, ...}</code>.</P>
<pre><code>
require 'mathly'
display(dot({1, 2, 3}, {3, 4, 5}))
-- 26
display(dot({1, 2}, {3, 4}))
-- 11
</code></pre>
<h4>&bull; &nbsp; <a name=flatten href=#list><code>flatten(x)</code></a></h4>
<p>Remove the structure of table <code>x</code> and return a table of all atomic elements in <code>x</code> in order.</p>
<pre><code>
m = require('mathly')
x = {1, 2, {3, 4, {5, 6, {7, 8, {9}}}}}
y = flatten(x)
display(y)
-- {1, 2, 3, 4, 5, 6, 7, 8, 9}

A = m{{1, 2, 3}, {4, 5, 6}, {7, 8, 9}}
-- 1 2 3
-- 4 5 6
-- 7 8 9
a = flatten(A)
display(a)
-- {1, 2, 3, 4, 5, 6, 7, 8, 9} -- row wise
b = flatten(A^T)
display(b)
-- {1, 4, 7, 2, 5, 8, 3, 6, 9} -- column wise
</code></pre>
<h4>&bull; &nbsp; <a name=hasindex href=#list><code>hasindex(table, index)</code></a></h4>
<p>Check if <code>table</code> contains <code>index</code>.</p>
<pre><code>
require 'mathly'
opt = {layout={width=900, height=400, grid={rows=2, columns=2}, title='Example'}}
x = hasindex(opt, 'grid')
print(x)
-- true
print(hasindex(opt, 'color'))
-- false
</code></pre>
<h4>&bull; &nbsp; <a name=inv href=#list><code>inv(A)</code></a></h4>
<p>Return the inverse of a square mathly matrix <code>A</code>. <u>Note</u>: <code>A</code> is modified.</p>
<pre><code>
m = require('mathly')
I = eye(3)
A = m{{1, 2, 3}, {3, 4, 5}, {-1, 2, 0}}
B = copy(A)
C = inv(A) * B
disp(C)
--         1            0    -0.000000
--  0.000000     1.000000     0.000000
-- -0.000000    -0.000000            1
</code></pre>
<h4>&bull; &nbsp; <a name=ismember href=#list><code>ismember(x, table)</code></a></h4>
<p>Check if <code>x</code> is a member of <code>table</code>.</p>
<pre><code>
require 'mathly'
x = {1, 2, 3, {4, 5, {6}}}
print(ismember(3, x))
-- true
print(ismember(4, x))
-- false
</code></pre>
<h4>&bull; &nbsp; <a name=join href=#list><code>join(t<sub>1</sub>, t<sub>2</sub>, ...)</code></code></a></h4>
<p>Concatenate tables <code>t<sub>1</sub></code>, <code>t<sub>2</sub></code>, ... and return the resulted table. The tables here may just be numbers or strings.</p>
<pre><code>
m = require('mathly')
x = {1, 2}
y = {3, 4, {5}}
disp(join(0, x, y, 10))
-- {0, 1, 2, 3, 4, {5}, 10}

z = m{{6}, {7}, {8}, {9}}
disp(join(x, z, 11)) -- a column vector is automatically converted into a row vector
-- {1, 2, 6, 7, 8, 9, 11}
</code></pre>
<h4>&bull; &nbsp; <a name=linspace href=#list><code>linspace(x, y, n)</code></a></h4>
<p>Return a table of <code>n</code> evenly spaced numbers starting at <code>x</code> and ending at <code>y</code>.</p>
<pre><code>
require 'mathly'
x = linspace(0, 2*pi, 1000)
y = cos(x)
plot(x, y, '-or')
</code></pre>
<h4>&bull; &nbsp; <a name=map href=#list><code>map(f, tbl)</code></a></h4>
<p>Apply function <code>f</code> to each atomic element in table <code>tbl</code> and return the result with the same structure of the table.</p>
<pre><code>
m = require('mathly')
a = range(1, 10)
-- {1, 2, 3, 4, 5, 6, 7, 8, 9, 10}
function f(x) return x ^ 2 end
b = map(f, a)
display(b)
-- {1, 4, 9, 16, 25, 36, 49, 64, 81, 100}

function g(x, y) return x + y end
display(map(g, a, b))
-- {2, 6, 12, 20, 30, 42, 56, 72, 90, 110}

x = {1, 2, {3, 4, {5, 6, {7}}}}
display(map(f, x))
{1, 4, {9, 16, {25, 36, {49}}}}

A = m{{1, 2, 3}, {3, 4, 5}, {-1, 2, 0}}
map(f, A) -- A is a mathly matrix, the result of map(f, A) is a mathly matrix, too.
-- 1   4   9
-- 9  16  25
-- 1   4   0
</code></pre>
<h4>&bull; &nbsp; <a name=zeros></a><a name=rand></a><a name=randi></a><a name=ones href=#list><code>ones</code>, <code>zeros</code>, <code>rand</code>, and <code>randi</code></a></h4>
<p>The usage of these functions is the same except randi that can take more arguments.</p>
<table><tbody>
<tr><td width=20></td><td><code>ones(m, n)</code></td><td> </td><td width=10> </td><td>Return a <code>mxn</code> mathly matrix of which each element is 1.</td></tr>
<tr><td width=20></td><td><code>zeros(m, n)</code></td><td> </td><td width=10> </td><td>Return a <code>mxn</code> mathly matrix of which each element is 0.</td></tr>
<tr><td width=20></td><td><code>rand(m, n)</code></td><td> </td><td width=10> </td><td>Return a <code>mxn</code> mathly matrix of which each element is a random number in [0, 1].</td></tr>
<tr><td width=20></td><td><code>randi(m, n, ...)</code></a></td><td> </td><td width=10> </td><td>Return a <code>mxn</code> mathly matrix of which each element is a random integer in [0, 100].</td></tr>
<tr><td width=20></td><td> </td><td> </td><td width=10> </td><td> </td></tr>
<tr><td width=20></td><td> </td><td> </td><td width=10> </td><td><u>Note</u>: Each function returns a table rather than a mathly column vector if <code>m = 1</code>.</td></tr>
</tbody></table>
<pre><code>
require 'mathly'
A = ones(2) -- or ones(2, 2)
disp(A)
-- 1 1
-- 1 1
B = zeros(2, 3) + 5
disp(B)
-- 5 5 5
-- 5 5 5
disp(A * B)
-- 10 10 10
-- 10 10 10

C = zeros(1, 5)  - return a table rather than a mathly matrix
-- C + 10 -- not allowed because C is not a mathly vector/matrix
display(C)
-- {0, 0, 0, 0, 0}

D = zeros(3, 1)  -- a mathly column vector
disp(D)
-- 0
-- 0
-- 0
display(D)
-- {{0}, {0}, {0}}
disp(2*D + 3)
-- 3
-- 3
-- 3

A = randi(2, 3) -- each element is a random integer in [0, 100]
disp(A)
-- it varies.
-- 68  46  85
-- 45  61  48
A = randi(3, 1, 50, 90) -- each element is a random integer in [50, 90]
display(A)
-- {{79}, {85}, {63}} -- it varies.
A = randi(1, 5, 50, 90) -- return a table rather than a mathly matrix
display(A)
-- {53, 54, 75, 80, 83} -- it varies.
</code></pre>
<h4>&bull; &nbsp; <a name=plot href=#list><code>plot(...)</code></a></h4>
<p>Plot the graph(s) of functions defined by data points , using specifications/options.</p>
<h5>Some specifications:</h5>
<ol>
<li>of the graph of a function: <code>mode</code>=<code>'lines+markers'</code>, <code>'lines'</code>, or <code>'markers'</code></li><p></p>
<li>of a line: <code>width</code>=5, <code>style</code>=<code>'-'</code> [solid, <code>':'</code> (dot), or <code>'--'</code> (dash)]</li><p></p>
<li>of a marker: <code>size</code>=10, <code>symbol</code>=<code>'circle'</code><p></p>
Some possible symbols are: <code>circle</code>, <code>circle-open</code>, <code>circle-open-dot</code>, <code>cross</code>, <code>diamond</code>, <code>square</code>, <code>x</code>, <code>triangle-left</code>, <code>triangle-right</code>, <code>triangle-up</code>, <code>triangle-down</code>, <code>hexagram</code>, <code>star</code>, <code>hourglass</code>, <code>bowtie</code>.</li><p></p>
<li>of a plot: e.g., <code>layout</code>={<code>width</code>=500, <code>height</code>=400, <code>grid</code>={<code>rows</code>=2, <code>columns</code>=2}, <code>title</code>='Demo'}</li>
</ol>
<h5>Some examples:</h5>
<pre><code>
require 'mathly';

x = linspace(0, pi, 100)
y1 = sin(x)
y2 = map(math.cos, x)
y3 = map(function(x) return x^2*math.sin(x) end, x)

spec1 = {layout={width=700, height=900, grid={rows=4, columns=1}, title='Example'}}
spec2 = {color='blue', name='f2', layout={width=500, height=500, grid={rows=4, columns=1}, title='Demo'}}
spec3 = {width=5, name='f3', style=':', color='cyan', symbol='circle-open', size78}

plot(x, y1)               -- plot the function defined by data in tables x and y1
plot(x, y1, x, y2, spec1) -- plot in a figure two functions defined by data in x and y1 and data in x and y2, respectively
plot(x, y1, '--xr', x, y2, {1.55}, {-0.6}, {symbol='circle-open', size=10, color='blue'})
plot(x, y1, '--xr', x, y2, ':g')
plot(x, y1, {xlabel="x-axis", ylabel="y-axis", color='red'})
plot(x, y1, spec1, x, y2, x, y3, 'o')  -- plot three functions in a figure
plot(x, y1, spec3, x, y2, spec1, x, y3, spec2, x, sin(x)) -- plot four functions in a figure

plot(rand(125, 4)) -- plots functions defined in each column of a matrix with the range of x from 0 to # of rows

spec = {layout={width=900, height=400, grid={rows=2, columns=2}, title='Demo'}, names={'f1', 'f2', 'f3', 'g'}}
plot(rand(125, 4), spec)

plot(rand(125, 4), {layout={width=900, height=400, grid={rows=2, columns=2}, title='Example'}})
plot(rand(100,3), {layout={width=900, height=400, grid={rows=3, columns=2}, title='Example'}}, rand(100,2))
plot(rand(100, 2), linspace(1,100,1000), sin(linspace(1,100,1000)), '-og', rand(100, 3))
</code></pre>
<h4>&bull; &nbsp; <a name=polyval href=#list><code>polyval(coefs, x)</code></a></h4>
<p>Evaluate at <code>x</code> the value of a polynomial of which the coefficients are specified
in a table <code>coefs</code>.</p>
<p>For a polynomial of <code>p(x) = a<sub>n</sub>x<sup>n</sup> + a<sub>n-1</sub>x<sup>n-1</sup> + ... +
a<sub>1</sub>x + a<sub>0</sub></code>,
<code>coefs = {a<sub>n</sub>, a<sub>n-1</sub>, ..., a<sub>0</sub>}</code>.
For example, <code>p(x) = -2x<sup>4</sup> + 4x<sup>2</sup> - 5x</code>, <code>coef = {-2, 0, 4, -5, 0}.</code></p>
<pre><code>
require 'mathly'
x = polyval({1, 2, 1}, 0) -- evaluate x<sup>2</sup> + 2x + 1 at x = 0
print(x)
-- 1
</code></pre>
<h4>&bull; &nbsp; <a name=sum></a><a name=prod href=#list><code>prod(A)</code> and <code>sum(A)</code></a></h4>
<ol>
<li>If <code>A</code> is a table or mathly row/column vector, return the product/sum of its elements;</li>
<li>If A is a <code>mxn</code> matrix, return a table of which the <code>i</code>-th element is the product/sum of
the <code>i</code>-th column of <code>A</code>.</p></li>
</ol>
<pre><code>
m = require('mathly')
a = {1, 2, 3}
print(sum(a))
-- 6

a = {{1}, {2}, {3}}
print(sum(a))
-- 6

a = m{{1, 2, 3}, {2, 3, 4}, {3, 4, 5}}
disp(a)
--  1  2  3
--  2  3  4
--  3  4  5
disp(sum(a))
-- {6, 9, 12}
disp(prod(a))
-- {6, 24, 60}
</code></pre>
<h4>&bull; &nbsp; <a name=range href=#list><code>range(x, y, s)</code></a></h4>
<p>Return a table of numbers starting at <code>x</code>, in between <code>x</code> and <code>y</code>, and incrementing by <code>s</code> (1 by default).</p>
<pre><code>
require 'mathly'
x = range(1, 10)
disp(x)
-- {1, 2, 3, 4, 5, 6, 7, 8, 9, 10}

display(range(10, 1, -1))
-- {10, 9, 8, 7, 6, 5, 4, 3, 2, 1}

disp(range(0, 6, 0.5))
-- {0, 0.5, 1, 1.5, 2, 2.5, 3, 3.5, 4, 4.5, 5, 5.5, 6}
</code></pre>
<h4>&bull; &nbsp; <a name=reshape href=#list><code>reshape(A, m, n)</code></a></h4>
<p>Rearrange existing elements in a table or mathly matrix <code>A</code> and return a new <code>mxn</code> mathly matrix.</p>
<pre><code>
m = require('mathly')
reshape({1, 2, 3, 4, 5, 6, 7, 8, 9, 10}, 3) -- return a 3x4 mathly matrix, where 4 is automatically determined
-- 1  4  7  10
-- 2  5  8  0
-- 3  6  9  0

reshape({1, 2, 3, 4, 5, 6, 7, 8, 9, 10}, 3, 5) -- <b>column wise</b>; no sufficient numbers in a table? fill with 0
-- 1  4  7  10  0
-- 2  5  8  0   0
-- 3  6  9  0   0

a = m{{1, 2, 3}, {2, 3, 4}, {3, 4, 5}}
disp(a)
-- 1  2  3
-- 2  3  4
-- 3  4  5
b = reshape(a, 2)
disp(a)
disp(b)
-- 1  3  3  3  5
-- 2  2  4  4  0
c = reshape(a, 2, 7)
disp(c)
-- 1  3  3  3  5  0  0
-- 2  2  4  4  0  0  0
</code></pre>
<h4>&bull; &nbsp; <a name=rref href=#list><code>rref(A, ...)</code></a></h4>
<p>If there is one more argument, i.e., <code>rref(A, B)</code>, <code>A</code> and <code>B</code> will be merged horizontally into A.
<p><code>A</code> and <code>B</code> must be mathly matrices with the same row number.</p>
<p>Return the reduced row-echelon form of a mathly matrix <code>A</code>. <u>Note</u>: <code>A</code> and <code>B</code> are modified.</p>
<p>To solve Ax = b, call rref(A, b) first, and b gives the solution.</p>
<pre><code>
m = require('mathly')
a = m{{1, 2, 3}, {2, 3, 4}, {3, 4, 5}, {4, 5, 6}}
disp(a)
--  1  2  3
--  2  3  4
--  3  4  5
--  4  5  6
rref(a)
disp(a)
--  1  0 -1
--  0  1  2
--  0  0  0
--  0  0  0

-- To solve <code>Ax =b<sub>1</sub></code>, <code>Ax = b<sub>2</sub></code>, and <code>Ax = b<sub>3</sub></code>:
m = require('mathly')
A = m{{1, 2, 3}, {2, 3, 4}, {0, -1, 2}}
b1 = m{{1},{2},{3}}
b2 = m{{1},{0},{5}}
b3 = m{{-2},{1},{2}}

B = m(concath(b1, b2, b3))
rref(A, B)
disp(B)
--  1.75 -1.25  7.25
-- -1.5  -1.5  -3.5
--  0.75  1.75 -0.75
-- the solutions are
display((B^T)[1])
-- {1.75, -1.5, 0.75}
display((B^T)[2])
-- {-1.25, -1.5, 1.75}
display((B^T)[3])
-- {7.25, -3.5, -0.75}
</code></pre>
<h4>&bull; &nbsp; <a name=save href=#list><code>save(datafile, ...)</code></a></h4>
<p>Save specified or all user-defined variables and their values to file <code>datafile</code>.</p>
<pre><code>
require 'mathly'
a = randi(3, 2)
disp(a)
--  48  43
--  71  72
--  66   5
b = {1, 2, {3, {4, {5, 6, {7}}}}}
c = 100
save('data_1.lua')  -- save all user-defined variables and their values to a file,
                    -- data_1.lua, in present working directory
                    -- to save to different place? e.g., 'D:/Workspace/data_1.lua'
save('data_2.lua', 'a', 'b')  -- save variables a, b, and their values to a file,
                    -- data_2.lua, in present working directory
clear()
print(a, b, c)
-- nil nil nil -- not defined

dofile('data_2.lua') -- load/recover the data
disp(a)
--  48  43
--  71  72
--  66   5
disp(b)
-- {1, 2, {3, {4, {5, 6, {7}}}}}
print(c)
-- nil
</code></pre>
<h4>&bull; &nbsp; <a name=seq href=#list><code>seq(x, y, n)</code></a></h4>
<p>Return a table of <code>n</code> evenly spaced numbers starting at <code>x</code>, in <code>[x, y]</code>, ending at <code>y</code>.</p>
<pre><code>
require 'mathly'
x = seq(1, 10) -- same as range(1, 10)
disp(x)
-- {1, 2, 3, 4, 5, 6, 7, 8, 9, 10}

x = seq(0, 1, 10) -- same as linspace(0, 1, 10)
display(x)
-- {0, 0.111111, 0.222222, 0.333333, 0.444444, 0.555556, 0.666667, 0.777778, 0.888889, 1}
</code></pre>
<h4>&bull; &nbsp; <a name=solve href=#list><code>solve(A, b)</code></a></h4>
<p>Solve a linear system <code>Ax = b</code> and return the solution.</p>
<p><u>Note</u>: Both <code>A</code> and <code>b</code> are modified.</p>
<pre><code>
require 'mathly'
a = randi(3)
aa = copy(a)
b = randi(3, 1)
disp(a)
-- it varies
--  58  18  88
--  68  30  71
--  14  75  49
disp(b)
-- 89
-- 6
-- 4

x = solve(a, b)
disp(x)
-- -2.149850
-- -1.306446
--  2.695538

x = solve(aa, {89, 6, 4}) -- or solve(aa, {{89}, {6}, {4}})
disp(x)
-- -2.149850
-- -1.306446
--  2.695538
</code></pre>
<h4>&bull; &nbsp; <a name=submatrix href=#list><code>submatrix(A, i, j, m, n)</code></a></h4>
<p>Return a mathly matrix, a block of mathly matrix <code>A</code>, starting at the <code>i</code>-th row
and <code>j</code>-th column and ending at the <code>m</code>-th row and <code>n</code>-th column.</p>
<pre><code>
m = require('mathly')

a = randi(4, 5)
disp(a)
-- 22  15  94  77  48
-- 43  58  96  64   5
-- 20  85  90  37  92
-- 16  67   9  56  33
b = submatrix(a, 3, 2, 4, 4)
disp(b)
--  85  90  37
--  67   9  56
</code></pre>
<h4>&bull; &nbsp; <a name=subtable href=#list><code>subtable(tbl, i, j)</code></a></h4>
<p>Return a slice of the table <code>tbl</code> starting from the <code>i</code>-th element to the <code>j</code>-th one.</p>
<pre><code>
m = require('mathly')
x = {1, 2, {3}, 4, {{5, 6, {7}}}}
display(subtable(x, 2, 4))
-- {2, {3}, 4}

a = m{1, 2, 3, 4, 5, 6, 7} -- {{1, 2, 3, 4, 5, 6, 7}}
display(subtable(a[1], 3, 5))
-- {3, 4, 5}
</code></pre>
<h4>&bull; &nbsp; <a name=toc></a><a name=tic href=#list><code>tic()</code> and <code>toc(...)</code></a></h4>
<table><tbody>
<tr><td width=20></td><td><code>tic()</code></td><td> </td><td width=10> </td><td>Start a wall-clock timer.</td></tr>
<tr><td width=20></td><td><code>toc(...)</code></td><td> </td><td width=10> </td><td>Print or return elapsed time on a wall-clock timer.</td></tr>
</tbody></table>
<pre><code>
require 'mathly'

tic() -- start recording the time
for i = 1, 10000000 do
  x = math.cos(i) * math.sin(i)
end
toc()

x = toc(1) -- pass any none-nil value to toc to get the elapsed time; otherwise, print the elapsed time
printf("The loop took %.2f seconds.", x)
</code></pre>
</div>
</body>
</html>
